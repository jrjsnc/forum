<!DOCTYPE html>
<html>
<link rel="stylesheet" href="css/login.css" />
<head>
<meta charset="UTF-8" />
<title>Movie forum</title>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col" th:replace="fragments::header"></div>
		</div>
		
		<h3><span th:text="${currentTopicTitle}"/></h3>

		<div class="row">
			<div class="col">
				<table class="comments">
					<tr th:each="comment : ${comments}">
						<td><span th:text='${comment.content}' /> <span>(</span> <span
							th:text='${comment.getForumUser().getLogin()}' /> <span>)</span>
							<span th:if='${@userController.Logged}'> <span
								th:if='${@userController.getLoggedUser().equals(comment.getForumUser())}'><a
									th:href='${"/deleteComment?ident=" + comment.ident}'>Delete
										comment</a></span>
						</span></td>
					</tr>


				</table>

				<span th:if='${@userController.Logged}'>

					<form action="/addComment" method="post">

						Add Comment: <input type="text" name="content"
							placeholder="Add comment here" required="required"/> <input type="submit"
							value="Post" />
					</form>
				</span>
			</div>
		</div>
		
		
		<hr/>
		Tags:
		<span th:each="tag : ${topicTags}">
							<span th:text="${tag.getName()}" /> </span>
		<hr/>					 

		<span th:if='${@userController.Logged}'> <span
			th:if='${#strings.toString(@userController.loggedUser.restriction) == "ADMIN"}'>


				<form th:action='${"/addTopicTag"}'>	
					<select th:name= "ident">
						<option th:each="tag : ${missingTags}" th:value="${tag.ident}"
							th:text="${tag.getName()}" />
					</select>					
					<input type="submit" value="Add new tag"/>
				</form> 
				
					<form th:action='${"/removeTopicTag"}'>	
					<select th:name= "ident">
						<option th:each="tag : ${topicTags}" th:value="${tag.ident}"
							th:text="${tag.getName()}" />
					</select>					
					<input type="submit" value="Remove tag"/>
				</form> 

		</span>
		</span>

		<div class="row">
			<div class="col" th:replace="fragments::footer"></div>
		</div>
	</div>


</body>
<script src="js/forum.js"/>
</html>